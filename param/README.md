#Описание файлов

##allCommand.php
Массив вида
```php
[
    ['Запрос','Ключ команды','Дополнительный код'],
    ...
    ['','','']
]
```
-1 Элемент это слово которое будет искаться в пользовательском запросе.
-2 Элемент это уникальный ключ команды.
-3 Элемент Дополнительное поле. Используется в добавлении своих команд. А так имеет значение 0, и 1 в том случае, если при запрос точно равен введеному тексту.

Дополнение списка команд осуществляется в инициализации метода:
```php
$yandexBot->dirAllCommand = __DIR__ . '/toolsCommand.php'; // Прописываем путь до команд, которые будут обрабатываться.
```
Массив идентичен массиву обработки стандартных команд. Разница заключается в следующем.
-Все найденные команды обрабатываются в прописаной логике навыка.

```php
$yandexBot->newCommand = new AlisaTools();
```
-Ключ команды должен иметь значение command
-Дополнительный параметр становится ключом команды.

###Пример дополнительных команд
```php
[
    ['кальк', 'command', 'tools'],
    ['инструм', 'command', 'tools'],
    ['город', 'command', 'selectCity'],
]
```
###Пример обработчика команд
```php
    /**
     * Обработка команд
     * @param $index
     * @return array
     */
    public function commands($index): array
    {
        $this->isParams();
        switch ($index) {
            case 'tools':
                return $this->tools();
                break;

            case 'selectCity':
                return $this->findCity();
                break;

            default:
                $text = $this->help();
                break;
        }

        return [$text];
    }
```


##Command
Класс с логикой навыка. наследован от класса `Alisa`
Обязательно должен быть унаследован от класса:
```php
common\components\alisa\param\Command
```
А так же должен быть определен метод:
```php
public function commands($index)
$index - ключ, тот что был указан в дополнительных коммандах (3 значение)
Функция обязательно должна возвращать массив вида:
[
    'Текст ответа', - string
    'Текст для ссылки', - string|array
    'Ссылка на ресурс' - string|array
]
```
###Важно
Если 2 или 3 параметр массив, то их длина должна быть идентичная.
Так же ссылку на ресурс можно оставить '' или null, тогда при нажатие на кнопку просто отправится текст.
П.с. так же можно вернуть массив вида:
```php
return ['text'];
```
Если вам не нужны ссылки.


Чтобы установить для навыка токен для картинки необходимо вызвать функцию
```php
public function setImageToken($token);

//Пример вызова:
$yandexBot->newCommand->setImageToken(<token>)
```
###Описание переменных
- `origText` - Оригинальный текст пользователя. Со всеми симвалами и в правильном регистре. 
- `isLink` - Есть ли ссылка.(не используется)
- `payload` - Полученый payload от навыка
- `meta` - Полученый meta от навыка
- `userId` - Идентификатор пользователя
- `buttons` - Массив для отображения кнопок пользователю. Имеет вид:

```php
[
    'Кнопка 1',
    'Кнопка 2',
    'Кнопка 3',
]
```
- `param` - Массив с пользовательскими данными
- `updateLink` - Переопределять ответ навыка или нет 
- `botName` - Имя бота